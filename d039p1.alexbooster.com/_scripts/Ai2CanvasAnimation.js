function clock(t,i,s,n,e,r,h,o,u){this.timeProvider=timeProvider,this.duration=t,this.delay=i,this.direction=s,this.reverses=n,this.iterations=e,this.timingFunction=r,this.multiplier=h*o,this.offset=h*u,this.reset=function(){this.startTime=0,this.stopTime=0,this.lastTime=0,this.baseDirection=this.direction,this.d=this.baseDirection,this.t=1==this.baseDirection?0:1,this.i=0,this.isRunning=!1,this.isFinished=!1,this.value=0},this.reset(),this.started=new customEvent("started"),this.stopped=new customEvent("stopped"),this.iterated=new customEvent("iterated"),this.finished=new customEvent("finished"),this.start=function(){this.isRunning||this.isFinished||(this.startTime=this.timeProvider.ticks()-(this.stopTime-this.startTime),this.isRunning=!0,this.started.fire(null,{message:this.started.eventName}))},this.restart=function(){this.reset(),this.start()},this.stop=function(){this.isRunning&&!this.isFinished&&(this.stopTime=this.timeProvider.ticks(),this.isRunning=!1,this.stopped.fire(null,{message:this.stopped.eventName}))},this.toggle=function(){this.isFinished||(this.isRunning?this.stop():this.start())},this.rewind=function(){this.isRunning&&!this.isFinished&&this.jumpTo(this.i)},this.fastForward=function(){this.isRunning&&!this.isFinished&&this.jumpTo(this.i+1)},this.reverse=function(){if(this.isRunning&&!this.isFinished){this.baseDirection=-this.baseDirection;var t=this.i+(-1==this.d?this.t:1-this.t);this.jumpTo(t)}},this.jumpTo=function(t){var i=this.timeProvider.ticks(),s=this.timeProvider.ticksPerSecond(),n=this.delay*s+t*this.duration*s;this.startTime=i-n},this.update=updateClock,this.value=this.timingFunction(this.t)*this.multiplier+this.offset,clocks.push(this)}function updateClock(){if(this.isRunning&&!this.isFinished){var t=this.timeProvider.ticks();if(t!=this.lastTime){var i=(t-this.startTime)/this.timeProvider.ticksPerSecond(),s=(i-this.delay)/this.duration;0>s&&(s=0);var n=Math.floor(s);n!=this.i&&this.iterated.fire(null,{message:this.iterated.eventName}),this.t=s-n,0!=this.iterations&&n>=this.iterations&&(n=this.iterations-1,this.t=1,this.stop(),this.isFinished=!0,this.finished.fire(null,{message:this.finished.eventName})),this.i=n,this.reverses?Math.floor(this.i)%2==0?this.d=this.baseDirection:this.d=-this.baseDirection:this.d=this.baseDirection,-1==this.d&&(this.t=1-this.t),this.value=this.timingFunction(this.t)*this.multiplier+this.offset,this.lastTime=t}}}function updateAllClocks(){for(var t=clocks.length,i=0;t>i;i++)clocks[i].update()}function standardClock(){this.ticks=function(){return(new Date).getTime()},this.ticksPerSecond=function(){return 1e3}}function customEvent(){this.eventName=arguments[0],this.subscribers=new Array,this.subscribe=function(t){-1==this.subscribers.indexOf(t)&&this.subscribers.push(t)},this.fire=function(t,i){if(this.subscribers.length>0)for(var s=0;s<this.subscribers.length;s++)this.subscribers[s](t,i)}}function updatePath(){var t=this.pathClock,i=t.value;if(i!=this.lastValue){(0>i||i>this.linear.length-1)&&(i=0>i?0:this.linear.length-1);var s=Math.floor(i),n=i-s,e=this.linear[s][0],r=e,h=this.linear[s][1],o=h,u=this.linear[s][2],a=u;if(s+1<this.linear.length)var r=this.linear[s+1][0],o=this.linear[s+1][1],a=this.linear[s+1][2];var c=e,f=0;if(e==r)f=n*(o-h)+h;else{var d=a-u,l=n*d,p=this.segmentT[e]-u;if(u+l<this.segmentT[e]){var m=0==p?0:l/p;f=(1-h)*m+h}else{c=r;var v=a-this.segmentT[e],b=l-p,m=0==v?0:b/v;f=m*o}}this.x=bezier(f,this.points[c][0][0],this.points[c][1][0],this.points[c][2][0],this.points[c][3][0]),this.y=bezier(f,this.points[c][0][1],this.points[c][1][1],this.points[c][2][1],this.points[c][3][1]);var E=0,g=0;0==f?(E=this.points[c][1][0],g=this.points[c][1][1],this.orientation=followOrientation(this.x,this.y,E,g,t.d)):1==f?(E=this.points[c][1][0],g=this.points[c][1][1],this.orientation=followOrientation(E,g,this.x,this.y,t.d)):(E=quadratic(f,this.points[c][0][0],this.points[c][1][0],this.points[c][2][0]),g=quadratic(f,this.points[c][0][1],this.points[c][1][1],this.points[c][2][1]),this.orientation=followOrientation(E,g,this.x,this.y,t.d)),this.lastValue=i}t.update()}function followOrientation(t,i,s,n,e){return 1==e?slope(t,i,s,n):slope(s,n,t,i)}function bezier(t,i,s,n,e){return Math.pow(t,3)*(e+3*(s-n)-i)+3*Math.pow(t,2)*(i-2*s+n)+3*t*(s-i)+i}function quadratic(t,i,s,n){return t=Math.max(Math.min(1,t),0),Math.pow(1-t,2)*i+2*t*(1-t)*s+t*t*n}function slope(t,i,s,n){var e=s-t,r=n-i;return Math.atan2(r,e)}function linear(t){return t}function sineEaseIn(t){return-Math.cos(t*(Math.PI/2))+1}function sineEaseOut(t){return Math.sin(t*(Math.PI/2))}function sineEaseInOut(t){return-.5*(Math.cos(Math.PI*t)-1)}function quintEaseIn(t){return t*t*t*t*t}function quintEaseOut(t){return t--,t*t*t*t*t+1}function quintEaseInOut(t){return t/=.5,1>t?.5*t*t*t*t*t:(t-=2,.5*(t*t*t*t*t+2))}function quartEaseIn(t){return t*t*t*t}function quartEaseOut(t){return t--,-(t*t*t*t-1)}function quartEaseInOut(t){return t/=.5,1>t?.5*t*t*t*t:(t-=2,-.5*(t*t*t*t-2))}function circEaseIn(t){return-(Math.sqrt(1-t*t)-1)}function circEaseOut(t){return t--,Math.sqrt(1-t*t)}function circEaseInOut(t){return t/=.5,1>t?-.5*(Math.sqrt(1-t*t)-1):(t-=2,.5*(Math.sqrt(1-t*t)+1))}function quadEaseIn(t){return t*t}function quadEaseOut(t){return-1*t*(t-2)}function quadEaseInOut(t){return t/=.5,1>t?.5*t*t:(t--,-.5*(t*(t-2)-1))}function cubicEaseIn(t){return t*t*t}function cubicEaseOut(t){return t--,t*t*t+1}function cubicEaseInOut(t){return t/=.5,1>t?.5*t*t*t:(t-=2,.5*(t*t*t+2))}function bounceEaseOut(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?(t-=1.5/2.75,7.5625*t*t+.75):2.5/2.75>t?(t-=2.25/2.75,7.5625*t*t+.9375):(t-=2.625/2.75,7.5625*t*t+.984375)}function bounceEaseIn(t){return 1-bounceEaseOut(1-t)}function bounceEaseInOut(t){return.5>t?.5*bounceEaseIn(2*t):.5*bounceEaseOut(2*t-1)+.5}function expoEaseIn(t){return 0==t?0:Math.pow(2,10*(t-1))}function expoEaseOut(t){return 1==t?1:-Math.pow(2,-10*t)+1}function expoEaseInOut(t){return 0==t?0:1==t?1:1>t/.5?(t/=.5,.5*Math.pow(2,10*(t-1))):(t/=.5,.5*(-Math.pow(2,-10*(t-1))+2))}function zeroStep(t){return 0>=t?0:1}function halfStep(t){return.5>t?0:1}function oneStep(t){return t>=1?1:0}function random(t){return Math.random()}function randomLimit(t){return Math.random()*t}function clockTick(t){var i=60;return Math.floor(t*i)/i}var timeProvider=new standardClock,clocks=new Array;