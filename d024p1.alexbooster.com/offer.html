<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>HTML5 canvas, local storage, CSS &amp; JavaScript: Personalized Ads on Your Website</title>
    <link rel="stylesheet" href="_css/styles.css">
    <script src="_scripts/jquery-3.2.1.min.js"></script>
    <!-- jcanvas plugin makes it easier to work with HTML5 canvas -->
    <script src="_scripts/jcanvas.min.js"></script>
    <script>
        $(document).ready(function() {
            // get data from local storage: 
            var storedAge = localStorage.getItem("age");
            var storedGender = localStorage.getItem("gender");
            if (storedAge != null) {
                var theAction, 
                    theImage, 
                    theImageAlt, 
                    theDiscount = "25% Off";
                if (storedGender === "male") {
                    theImage = "_images/mars_big.jpg";
                    theImageAlt = "Mars";
                } else {
                    theImage = "_images/venus_big.jpg";
                    theImageAlt = "Venus";
                }
                storedAge = parseInt(storedAge);
                if (storedAge <= 60) {
                    theAction = "HIKE";
                } else {
                    theAction = "TOUR";
                }
                
                $("#planetImage img").attr({
                    src: theImage, 
                    alt: theImageAlt
                });
                $("#actionText h1").text(theAction);
                $("#discount h1").text(theDiscount);
                $("#specialOffer").css("display", "block");
            }
        });
    </script>
</head>

    <body id="offerPage">
    <div id="infohead">
        <h1>HTML5 canvas, local storage, CSS &amp; JavaScript:<br>
            Personalized Ads on Your Website</h1>
    </div>
    <div id="wrapper">
        <p>The content on this 'special offer' page will change dynamically based on the input the user provides on the home page. That input is saved via HTML local storage in user's browser. So, it doesn't depend on cookies.
        </p>
        <div id="outerWrapper">
            <header>
                <nav>
                    <ul>
                        <li><a href="#">HOME</a></li>
                        <li><a href="#">Teens</a></li>
                        <li><a href="#">Kids</a></li>
                        <li><a href="#">Adults</a></li>
                    </ul>
                </nav>
                <!-- End nav -->
            </header>
            <!-- End header -->
            <div id="contentWrapper">
                <div id="specialOffer">
                    <div class="banner"></div>
                    <div id="actionText">
                        <h1>Tour</h1></div>
                    <div id="planetImage"><img src="_images/venus_big.jpg" alt="Venus"></div>
                    <div id="discount">
                        <h1>25% Off!</h1></div>
                    <div class="clearfix"></div>
                    <div class="banner"></div>
                </div>
                <section>
                    <hgroup>
                        <h1>This is a special offer page.</h1>
                        <h2>The content on this page will change dynamically based on the input collected from the user on the home page.</h2>
                    </hgroup>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eveniet ad dolor obcaecati. Sunt hic cumque quam, asperiores nemo architecto, quia delectus odit, ratione modi repellendus suscipit nam aperiam provident officiis. Excepturi, harum vero eius porro numquam adipisci quo laboriosam ullam assumenda ea! Nostrum dignissimos quod repellendus eius, voluptates laborum, amet expedita cum! </p>
                </section>
                <!-- End mainContent-->
                <aside>
                    <h2>No special offer?</h2>
                    <p>Visit the <a href="index.html">home page</a> and answer just 2 questions to get your special discount! Lorem ipsum dolor sit amet, consectetur adipisicing elit. Temporibus praesentium unde tenetur, aspernatur nam doloribus soluta dicta doloremque ea est quisquam mollitia, labore voluptate similique iusto ab fugit quibusdam aliquam! </p>
                </aside>
                <!-- End sideContent -->
            </div>
            <!-- End contentWrapper -->
            <footer>
                <p>Great Gifts for You, LLC. All rights reserved</p>
            </footer>
            <!-- End footer -->
        </div>
        <!-- End outerWrapper -->

    </div>

    <!-- info icon -->
    <a id="infoLink" href="#" title="Click to open info box about this project!">
        <div id="infoIcon" class="rollInFromLeft">
            <div id="ding" class="ding">
                <span id="i">i</span>
            </div>
        </div>
    </a>
    <!-- info icon END -->
    <!-- GitHub corner -->
    <a href="https://github.com/WebDevBooster/120-day-coding-challenge" class="github-corner" aria-label="View source on Github" target="_blank">
        <span>GitHub</span>
        <svg width="70" height="70" viewBox="0 0 250 250" style="fill:#808080; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
            <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
        </svg>
    </a>
    <!-- GitHub corner END -->

    <!-- Info Modal -->
    <div id="myModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <p>Visit the blog page with <a href="blog.html" target="_blank">all details of this project here</a> (opens new tab)
                <br> or watch the 60-second video below to learn about the main features:
                <br> / / / / / / / / / / / / / / / / / / / / / / / / / / / /
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br> This is a video placeholder.
                <br> The actual video is coming soon!
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br> / / / / / / / / / / / / / / / / / / / / / / / / / / / /
                <br> If you'd like to keep the 120-day coding challenge as a source of ideas/inspiration, give it a <a href="https://github.com/WebDevBooster/120-day-coding-challenge" target="_blank">star on GitHub</a>!</p>
        </div>
    </div>
    <!-- Info Modal END -->

    <script>
        // First we need to remove the class "rollInFromLeft" on hover
        // because otherwise the icons starts rolling in again.
        // Then we need to remove the class "ding" on click
        // because once the user clicks the icon there's no need for it
        // to keep "dinging".
        // Lastly, we should grey out the icon after first click because
        // once the icon has done its job, there's no need for it to "stick out" anymore.
        var icon = document.getElementById("infoIcon");
        icon.onmouseover = function() {
            icon.classList.remove("rollInFromLeft");
        }
        var ding = document.getElementById("ding");
        var i = document.getElementById("i");

        // Get the modal
        var modal = document.getElementById('myModal');

        icon.onclick = function() {
                // display modal
                modal.style.display = "block";
                // remove ding
                ding.classList.remove("ding");
                // grey out icon
                icon.style.backgroundColor = "#D4D6D9";
                icon.style.borderColor = "#808080";
                i.style.textShadow = "1px 1px 4px rgba(11, 11, 11, .5), -1px -1px 4px rgba(11, 11, 11, .5)";
            }
            // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // When the user hits the ESC key (key code 27), close the modal
        window.onkeydown = function(event) {
            if (event.keyCode == 27) {
                modal.style.display = "none";
            }
        }
    </script>
</body>

</html>